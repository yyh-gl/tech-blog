<!doctype html><html lang=ja>
<head>
<meta charset=utf-8>
<title>【mercari.go #8】メルカリのGoに関する勉強会メモ - yyh-gl's Tech Blog</title>
<meta name=viewport content="width=device-width,initial-scale=1">
<link rel=apple-touch-icon sizes=180x180 href="/tech-blog/favicon/apple-touch-icon.png?v=1">
<link rel=icon type=image/png sizes=32x32 href="/tech-blog/favicon/favicon-32x32.png?v=1">
<link rel=icon type=image/png sizes=16x16 href="/tech-blog/favicon/favicon-16x16.png?v=1">
<link rel=manifest href="/tech-blog/favicon/site.webmanifest?v=1">
<link rel=mask-icon href="/tech-blog/favicon/safari-pinned-tab.svg?v=1" color=#ffffff>
<link rel="shortcut icon" href="/tech-blog/favicon/favicon.ico?v=1">
<meta name=msapplication-config content="/tech-blog/favicon/browserconfig.xml?v=1">
<meta name=msapplication-TileColor content="#ffffff">
<meta name=theme-color content="#ffffff">
<meta name=generator content="Hugo 0.92.1"><meta property="og:site_name" content="yyh-gl's Tech Blog">
<meta property="og:title" content="【mercari.go #8】メルカリのGoに関する勉強会メモ">
<meta property="og:description" content="技術系ネタ中心のブログです。サーバサイドをメインとしたフルスタックエンジニアを目指しています。">
<meta property="description" content="技術系ネタ中心のブログです。サーバサイドをメインとしたフルスタックエンジニアを目指しています。">
<meta property="og:url" content="https://yyh-gl.github.io/tech-blog/blog/mercari_go/">
<meta property="og:type" content="article">
<meta property="og:image" content="https://yyh-gl.github.io/tech-blog/img/tech-blog/2019/06/mercari_go/featured.webp">
<meta property="og:image:alt" content="featured">
<link rel=stylesheet href=/tech-blog/css/bundle.min.b3b210b14743bef0baf37fbaaa81e2f4cd1365a34bd4a475a59f83d587fd7edc.css integrity="sha256-s7IQsUdDvvC683+6qoHi9M0TZaNL1KR1pZ+D1Yf9ftw="><link rel=stylesheet href=/tech-blog/css/add-on.css>
<link rel=stylesheet href=/tech-blog/css/prism.css>
<script src=https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js></script>
<script src=/tech-blog/js/vue.min.js></script>
<script src=/tech-blog/js/good-counter.js defer></script>
</head>
<body>
<header id=site-header>
<nav id=site-nav>
<h1 class=nav-title>
<a href=/tech-blog/ class=nav>
Blog
</a>
</h1>
<menu id=site-nav-menu class="flyout-menu menu">
<a href=/tech-blog/ class="nav link"><i class="fa fa-home"></i> Home</a>
<a href=/tech-blog/about/ class="nav link"><i class="far fa-id-card"></i> About</a>
<a href=/tech-blog/blog/ class="nav link"><i class="far fa-newspaper"></i> Blog</a>
<a href=/tech-blog/categories/ class="nav link"><i class="fas fa-sitemap"></i> Categories</a>
</menu>
<a href=#site-nav class="nav nav-toggle"><i class="fas fa-bars fa-2x"></i></a>
</nav>
</header>
<div id=wrapper>
<section id=site-intro>
<a href=/tech-blog/><img src=https://yyh-gl.github.io/tech-blog/img/main/logo.webp class=circle width=80 alt="yyh-gl's icon"></a>
<header>
<h1>yyh-gl's Tech Blog</h1>
</header>
<main>
<p>技術ネタ中心のブログです。主な扱いはバックエンド技術と設計です。</p>
</main>
<footer>
<ul class=socnet-icons>
<li><a href=//github.com/yyh-gl target=_blank rel=noopener title=GitHub class="fab fa-github"></a></li>
<li><a href=//twitter.com/yyh_gl target=_blank rel=noopener title=Twitter class="fab fa-twitter"></a></li>
<li><a href=//speakerdeck.com/yyh_gl target=_blank title="Speaker Deck" class="fab fa-speaker-deck"></a></li>
<li><a href=//crowdin.com/profile/yyh-gl target=_blank title=Crowdin class="fas fa-pen-square"></a></li>
</ul>
</footer>
</section>
<main id=site-main>
<article class=post>
<header>
<div class=title>
<h2><a href=/tech-blog/blog/mercari_go/>【mercari.go #8】メルカリのGoに関する勉強会メモ</a></h2>
</div>
<div class=meta>
<time datetime="2019-06-15 00:00:00 +0000 UTC">2019-06-15</time>
<p>yyh-gl</p>
<p>2 分で読めます</p>
</div>
</header>
<div id=socnet-share>
</div>
<div class=content>
<a href=/tech-blog/blog/mercari_go/ class=image style="--bg-image:url('https://yyh-gl.github.io/tech-blog/img/tech-blog/2019/06/mercari_go/featured.webp')">
<img src=https://yyh-gl.github.io/tech-blog/img/tech-blog/2019/06/mercari_go/featured.webp alt=featured>
</a>
<h1 id=mercarigo-8>mercari.go #8</h1>
<ul>
<li>connpass： <a href="https://mercari.connpass.com/event/132114/?utm_campaign=event_message_to_selected_participant&utm_source=notifications&utm_medium=email&utm_content=title_link" target=_blank rel="noopener noreferrer">リンク</a>
</li>
<li>ハッシュタグ： <a href="https://twitter.com/search?q=%23mercarigo&src=typd&lang=ja" target=_blank rel="noopener noreferrer">&lt;code>#mercarigo&lt;/code></a>
</li>
<li>独自ルール： <a href=https://twitter.com/zaki_hmkc/status/1139481689300713472 target=_blank rel="noopener noreferrer">懇親会のGルール</a>
<br>
懇親会のときに登壇者を囲んでもいいけど、自分たち以外にもう一人入ってこれるスペースを常に開けておこうねっていうルール。とてもよい！</li>
<li>雰囲気</li>
</ul>
<img src=https://yyh-gl.github.io/tech-blog/img/tech-blog/2019/06/mercari_go/goods.JPG height=300>
<p>ビール以外にもおいしそうなご飯もありましたが、写真を撮るの忘れ…</p>
<br>
<p>以降、自分用のメモを書き連ねます。<br>
詳細はスライドの方をご覧ください。</p>
<h1 id=1-goで学ぶknative>1. Goで学ぶKnative</h1>
<p>登壇者： @toshi0607 さん</p>
<p><a href=https://speakerdeck.com/toshi0607/learning-knative-with-go target=_blank rel="noopener noreferrer">スライドリンク</a>
</p>
<h2 id=knativehttpscloudgooglecomknativehlja><a href="https://cloud.google.com/knative/?hl=ja" target=_blank rel="noopener noreferrer">Knative</a>
</h2>
<ul>
<li>Knative ＝ 最新のサーバーレス ワークロードをビルド、デプロイ、管理できる Kubernetes ベースのプラットフォーム
<ul>
<li>AWS の Lmabda に近いことを k8s 上でできると解釈</li>
</ul>
</li>
<li>登壇者含め、会場内で Knative を本番に導入している人はなし。<br>まだ時期尚早っぽい</li>
<li>k8s のリソースを抽象化し、独自のPaaS/FaaSを構築するためのパーツを提供</li>
<li>k8s 上にのっかる。</li>
<li>Knative の構成
<ul>
<li><a href="https://speakerdeck.com/toshi0607/learning-knative-with-go?slide=8" target=_blank rel="noopener noreferrer">Serving</a>
</li>
<li><a href="https://speakerdeck.com/toshi0607/learning-knative-with-go?slide=13" target=_blank rel="noopener noreferrer">Build</a>
</li>
<li><a href="https://speakerdeck.com/toshi0607/learning-knative-with-go?slide=15" target=_blank rel="noopener noreferrer">Eventing</a>
</li>
</ul>
</li>
<li>現状、一部、Istio に依存してしまっているので、Istioの導入が必要不可欠</li>
<li>登壇者は 機能実装に一層集中するための基盤 として注目している</li>
<li>yml ファイルで定義した内容に基づいて コード生成</li>
</ul>
<h2 id=感想>感想</h2>
<p>終盤、 Knative の内部処理を コードリーディング していたのですが、<br>
見入ってしまいメモを忘れていました。。。</p>
<p>Knative 初めて聞いたのですが、おもしろそうだなという感想。</p>
<p>k8s の勉強しないとな。</p>
<h1 id=2-gotham-goとgophercon-euに参加してきました>2. Gotham GoとGopherCon EUに参加してきました</h1>
<p>登壇者： @tenntenn</p>
<p><a href=https://docs.google.com/presentation/d/1u6E0btAS_uJP8F62Ly2GdZScJYbLK-Ub9QnnMGm0IRY target=_blank rel="noopener noreferrer">スライドリンク</a>
</p>
<br>
<ul>
<li>技術をアウトプットするところに人は集まる</li>
<li>メルペイ エキスパートチーム では <u>50%以上の時間</u> をコミュニティへの貢献に充てている</li>
<li>海外カンファレンスに参加する理由
<ul>
<li>最新の技術を知る</li>
<li>世界各地のエンジニアとの交流</li>
</ul>
</li>
</ul>
<h2 id=gotham-go>Gotham Go</h2>
<ul>
<li>ニューヨークで毎年開かれている Go カンファレンス</li>
<li>1トラック</li>
<li>200名くらいが参加する（そんなに大規模ではない）</li>
<li>ハンズオンがあった
<ul>
<li>パックマン（ゲーム）作った（<a href=https://github.com/danicat/pacgo target=_blank rel="noopener noreferrer">github</a>
）</li>
<li>絵文字で動くらしい</li>
<li>step by step で初心者におすすめ</li>
</ul>
</li>
<li><u>自作楽器</u> を Go から操作する</li>
<li>スライスをプール（再利用）する方法
<ul>
<li>leachsync を使う方法が良さそうという結論</li>
</ul>
</li>
<li>セッションのレベルは 日本の Go Conference と同等
<ul>
<li>ただし、 現地に Goチーム がいるので登壇者が豪華</li>
</ul>
</li>
<li>突然ビンゴ大会が始まったりする</li>
</ul>
<h2 id=gophercon-eu>GopherCon EU</h2>
<ul>
<li>ヨーロッパで毎年開催されている
<ul>
<li>ヨーロッパ中から Gopher が集まる</li>
</ul>
</li>
<li>参加者は200名くらい</li>
<li>2トラックで大きめ</li>
<li>ダイバーシティスカラーシップがあり、費用の補助が出る（一部）</li>
<li>リーダビリティに関するセッション
<ul>
<li>width が大きいスパゲッティコード と dipth が大きい行き過ぎた抽象化 どちらもそれぞれいやなことがある。この間ぐらいがいいよねーって話。</li>
</ul>
</li>
<li>GoTrace： Go Routine を可視化するライブラリ → <a href=https://divan.dev/posts/visual_programming_go/ target=_blank rel="noopener noreferrer">参考記事リンク</a>
<ul>
<li><u>IDE でコードを読むなんて、 洞窟でたいまつをもって壁画に書かれた文字を読むようなもの。</u> 可視化しましょう！</li>
</ul>
</li>
<li><u>現在使用では、 map に range を使うとキーがランダムに並ぶ</u> ので、それを使ってLT大会の発表順を決めた</li>
</ul>
<h2 id=感想-1>感想</h2>
<ul>
<li>メルペイ エキスパートチーム では <u>50%以上の時間</u> をコミュニティへの貢献に充てている</li>
</ul>
<p>これすごくないですか？</p>
<p>多くのつよつよエンジニアが集まるのも納得です。</p>
<br>
<p>海外のカンファレンスのノリがおもしろそうでした。</p>
<p>発表にかける気合がすごい笑</p>
<p>ぜひ、一度行ってみたいです。</p>
<h1 id=3-go--webassemblyを活用する>3. Go + WebAssemblyを活用する</h1>
<p>登壇者： @__syumai</p>
<ul>
<li>メルペイのバックエンドエンジニア</li>
<li>Go Playground にタブを追加する chrome拡張を作った人</li>
</ul>
<p><a href=https://speakerdeck.com/syumai/using-go-and-webassembly/ target=_blank rel="noopener noreferrer">スライドリンク</a>
</p>
<h2 id=go-webassemblywasm-ワズム>Go WebAssembly（wasm ワズム）</h2>
<ul>
<li>experimental の機能</li>
<li>1.11 以上で使用可能</li>
<li>GOOS=js GOARCH=wasm でビルドすると .wasm ファイルが生成され、JavaScript から使用できる
≒ JavaScriptからGoを使用できるようになる</li>
<li>クリックの動作をGoで実装したりした</li>
<li>select{} 使わないと main 関数が終了して JavaScriptから呼べなくなる（<a href=https://twitter.com/shumon_84/status/1139502364673466368 target=_blank rel="noopener noreferrer">参考</a>
）</li>
<li>つらみ
<ul>
<li>GOOS=js GOARCH=wasm でしかビルドできないので、テストができない
<ul>
<li>（解決策）テストしたい部分は別パッケージにエクスポートする。Goで実装するやつは main.go だけに依存するようにしたらいい。</li>
</ul>
</li>
<li>DOM操作をGoでやった（JavaScript ならしゅっと書けるのに…）
<ul>
<li>（解決策）ビジネスロジック部分だけをGoで実装するようにしないとつらい</li>
<li>DOM操作は素直に JavaScript にお任せした方がいい</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id=感想-2>感想</h2>
<p>JavaScriptからGoで実装した機能を使えるのはいろいろと便利そう。</p>
<h1 id=4-e2e-testing-with-main-function>4. E2E Testing with &lsquo;main&rsquo; function</h1>
<p>登壇者： @yuki.ito</p>
<br>
<ul>
<li>サンプルリポジトリ： <a href=https://github.com/110y/go-e2e-example target=_blank rel="noopener noreferrer">https://github.com/110y/go-e2e-example</a>
</li>
<li>普通にテストしようとすると <code>main</code> 関数 がカバレッジに含まれないから、含まれるように努力する話
<ol>
<li>e2e で TestMain を起動し、go test . でトップレベルのコードをgoroutineで起動</li>
<li>Mainで起動されたサーバに対して TestMainから接続してリクエストを投げる</li>
<li>TestMainで生成したクライアントから個々のテストを実行する。</li>
<li>mainのカバレッジも取れる。</li>
</ol>
</li>
</ul>
<h2 id=感想-3>感想</h2>
<p>こういう工夫して問題解決する話大好きです。</p>
<p>その手があったか。とただただ説明を聞き入ってました。</p>
<h1 id=全体まとめ>全体まとめ</h1>
<p>メルカリ社の技術力の高さがとても分かる勉強会でした。</p>
<p>中の人たちが積極的に外に出てキャッチアップをしている姿見習っていきたいと思います。</p>
<p>また参加したいなー</p>
</div>
<footer>
<div class=stats>
<ul class=categories>
<li><a class=article-terms-link href=/tech-blog/categories/go/>Go</a></li>
<li><a class=article-terms-link href=/tech-blog/categories/%e5%8b%89%e5%bc%b7%e4%bc%9a/>勉強会</a></li>
</ul>
<div>
<good-counter url=/tech-blog/blog/mercari_go/></good-counter>
</div>
</div>
</footer>
<div class=fix>
<a href="https://github.com/yyh-gl/tech-blog/issues/new?template=fix_proposal.md&assignees=yyh-gl&title=修正提案：『%e3%80%90mercari.go%20%238%e3%80%91%e3%83%a1%e3%83%ab%e3%82%ab%e3%83%aa%e3%81%aeGo%e3%81%ab%e9%96%a2%e3%81%99%e3%82%8b%e5%8b%89%e5%bc%b7%e4%bc%9a%e3%83%a1%e3%83%a2』" target=_blank rel="noopener noreferrer">
修正提案
</a>
</div>
</article>
<div class=pagination>
<a href=/tech-blog/blog/blog_style_fix/ class="button left"><span>【HTML + CSS + Prism.js】ブログの見た目を整えた話</span></a>
<a href=/tech-blog/blog/go_web_api/ class="button right"><span>【Go + レイヤードアーキテクチャー】DDDを意識してWeb APIを実装してみる</span></a>
</div>
</main>
<section id=site-sidebar>
<section id=recent-posts>
<header>
<h1>最近の投稿</h1>
</header>
<article class=mini-post>
<a href=/tech-blog/blog/activity-2021/ class=image style="--bg-image:url('https://yyh-gl.github.io/tech-blog/img/tech-blog/2022/01/activity-2021/featured.webp')">
<img src=https://yyh-gl.github.io/tech-blog/img/tech-blog/2022/01/activity-2021/featured.webp alt=featured>
</a>
<header>
<h2><a href=/tech-blog/blog/activity-2021/>【2021年】アクティビティまとめ</a></h2>
<time class=published datetime="2022-01-02 11:59:04 +0000 UTC">2022-01-02</time>
</header>
</article>
<article class=mini-post>
<a href=/tech-blog/blog/go-build/ class=image style="--bg-image:url('https://yyh-gl.github.io/tech-blog/img/tech-blog/2021/12/go-build/featured.webp')">
<img src=https://yyh-gl.github.io/tech-blog/img/tech-blog/2021/12/go-build/featured.webp alt=featured>
</a>
<header>
<h2><a href=/tech-blog/blog/go-build/>徒然なるままに go build と build tag を見ていく</a></h2>
<time class=published datetime="2021-12-19 00:00:00 +0000 UTC">2021-12-19</time>
</header>
</article>
<article class=mini-post>
<a href=/tech-blog/blog/activity-2020/ class=image style="--bg-image:url('https://yyh-gl.github.io/tech-blog/img/tech-blog/2021/02/activity-2020/featured.webp')">
<img src=https://yyh-gl.github.io/tech-blog/img/tech-blog/2021/02/activity-2020/featured.webp alt=featured>
</a>
<header>
<h2><a href=/tech-blog/blog/activity-2020/>【2020年】アクティビティまとめ</a></h2>
<time class=published datetime="2021-02-23 09:41:54 +0000 UTC">2021-02-23</time>
</header>
</article>
<footer>
<a href=/tech-blog/blog/ class=button>続きを見る</a>
</footer>
</section>
<section id=mini-bio>
<header>
<h1>About</h1>
</header>
<p>東京で働くソフトウェアエンジニアです。バックエンドがメインですが、フロントやインフラもさわっています。</p>
<footer>
<a href=/tech-blog/about class=button>もっと詳しく知る</a>
</footer>
</section>
</section>
<footer id=site-footer>
<ul class=socnet-icons>
<li><a href=//github.com/yyh-gl target=_blank rel=noopener title=GitHub class="fab fa-github"></a></li>
<li><a href=//twitter.com/yyh_gl target=_blank rel=noopener title=Twitter class="fab fa-twitter"></a></li>
<li><a href=//speakerdeck.com/yyh_gl target=_blank title="Speaker Deck" class="fab fa-speaker-deck"></a></li>
<li><a href=//crowdin.com/profile/yyh-gl target=_blank title=Crowdin class="fas fa-pen-square"></a></li>
</ul>
<p class=copyright>
© 2022 yyh-gl's Tech Blog
<br>
Theme: <a href=https://github.com/pacollins/hugo-future-imperfect-slim target=_blank rel=noopener>Hugo Future Imperfect Slim</a><br>A <a href=https://html5up.net/future-imperfect target=_blank rel=noopener>HTML5 UP port</a> | Powered by <a href=https://gohugo.io/ title=0.92.1 target=_blank rel=noopener>Hugo</a>
</p>
</footer>
<a id=back-to-top href=# class="fas fa-arrow-up fa-2x"></a>
<script src=/tech-blog/js/bundle.min.a2a773c2e0e07f69b603aa1005699cd705a4f1b9d9a30fc03b920aa4948ee39e.js integrity="sha256-oqdzwuDgf2m2A6oQBWmc1wWk8bnZow/AO5IKpJSO454="></script>
<script src=/tech-blog/js/add-on.js></script>
<script src=/tech-blog/js/prism.js></script>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-140914324-1','auto'),ga('send','pageview'))</script>
<script async src=https://www.google-analytics.com/analytics.js></script>
</div>
</body>
</html>