<!doctype html><html lang=ja><head><meta charset=utf-8><title>ã€Go+VCRã€‘å¤–éƒ¨APIã¨ã®é€šä¿¡ã‚’ä¿å­˜ã—ã¦ãƒ†ã‚¹ãƒˆã«ä½¿ç”¨ã™ã‚‹è©± - yyh-gl's Tech Blog</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel=apple-touch-icon sizes=180x180 href="/favicon/apple-touch-icon.png?v=1"><link rel=icon type=image/png sizes=32x32 href="/favicon/favicon-32x32.png?v=1"><link rel=icon type=image/png sizes=16x16 href="/favicon/favicon-16x16.png?v=1"><link rel=manifest href="/favicon/site.webmanifest?v=1"><link rel=mask-icon href="/favicon/safari-pinned-tab.svg?v=1" color=#ffffff><link rel="shortcut icon" href="/favicon/favicon.ico?v=1"><meta name=msapplication-config content="/favicon/browserconfig.xml?v=1"><meta name=msapplication-TileColor content="#ffffff"><meta name=theme-color content="#ffffff"><meta name=generator content="Hugo 0.109.0"><meta property="og:site_name" content="yyh-gl's Tech Blog"><meta property="og:title" content="ã€Go+VCRã€‘å¤–éƒ¨APIã¨ã®é€šä¿¡ã‚’ä¿å­˜ã—ã¦ãƒ†ã‚¹ãƒˆã«ä½¿ç”¨ã™ã‚‹è©±"><meta property="og:description" content="Go3 Advent Calendar 2019 8æ—¥ç›®"><meta property="description" content="Go3 Advent Calendar 2019 8æ—¥ç›®"><meta property="og:url" content="https://tech.yyh-gl.dev/blog/golang-vcr/"><meta property="og:type" content="article"><meta property="og:image" content="https://tech.yyh-gl.dev/img/2019/12/golang-vcr/featured.webp"><meta property="og:image:alt" content="featured"><link rel=stylesheet href=/css/bundle.min.eecc4098b778083eae3bb22681e71b028b3fcaeb1e2d9aa074ac7327cd7ecea0.css integrity="sha256-7sxAmLd4CD6uO7ImgecbAos/yuseLZqgdKxzJ81+zqA="><link rel=stylesheet href=/css/add-on.css><link rel=stylesheet href=/css/prism.css><link rel=alternate type=application/atom+xml title=Atom href=/index.xml><script src=https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js></script>
<script src=/js/vue.min.js></script>
<script src=/js/good-counter.js defer></script></head><body><header id=site-header><nav id=site-nav><h1 class=nav-title><a href=/ class=nav>Blog</a></h1><menu id=site-nav-menu class="flyout-menu menu"><a href=/ class="nav link"><i class='fa fa-home'></i> Home</a>
<a href=/about/ class="nav link"><i class='far fa-id-card'></i> About</a>
<a href=/blog/ class="nav link"><i class='far fa-newspaper'></i> Blog</a>
<a href=/categories/ class="nav link"><i class='fas fa-sitemap'></i> Categories</a></menu>
<a href=#site-nav class="nav nav-toggle"><i class="fas fa-bars fa-2x"></i></a></nav></header><div id=wrapper><section id=site-intro><a href=/><img src=https://tech.yyh-gl.dev/img/main/logo.webp class=circle width=80 alt="yyh-gl's icon"></a><header><h1>yyh-gl's Tech Blog</h1></header><main><p>æŠ€è¡“ãƒã‚¿ä¸­å¿ƒã®ãƒ–ãƒ­ã‚°ã§ã™ã€‚ä¸»ãªæ‰±ã„ã¯ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰æŠ€è¡“ã¨è¨­è¨ˆã§ã™ã€‚</p></main><footer><ul class=socnet-icons><li><a href=//github.com/yyh-gl target=_blank rel=noopener title=GitHub class="fab fa-github"></a></li><li><a href=//www.linkedin.com/in/yyh-gl target=_blank rel=noopener title=LinkedIn class="fab fa-linkedin"></a></li><li><a href=//twitter.com/yyh_gl target=_blank rel=noopener title=Twitter class="fab fa-twitter"></a></li><li><a href=//speakerdeck.com/yyh_gl target=_blank title="Speaker Deck" class="fab fa-speaker-deck"></a></li><li><a href=//crowdin.com/profile/yyh-gl target=_blank title=Crowdin class="fas fa-pen-square"></a></li></ul></footer></section><main id=site-main><article class=post><header><div class=title><h2><a href=/blog/golang-vcr/>ã€Go+VCRã€‘å¤–éƒ¨APIã¨ã®é€šä¿¡ã‚’ä¿å­˜ã—ã¦ãƒ†ã‚¹ãƒˆã«ä½¿ç”¨ã™ã‚‹è©±</a></h2><p>Go3 Advent Calendar 2019 8æ—¥ç›®</p></div><div class=meta><time datetime="2019-12-08 09:00:00 +0900 +0900">2019-12-08</time><p>yyh-gl</p><p>5 åˆ†ã§èª­ã‚ã¾ã™</p></div></header><div id=socnet-share></div><div class=content><a href=/blog/golang-vcr/ class=image style="--bg-image:url('https://tech.yyh-gl.dev/img/2019/12/golang-vcr/featured.webp')"><img src=https://tech.yyh-gl.dev/img/2019/12/golang-vcr/featured.webp alt=featured></a><h1 id=go3-advent-calendar-2019>Go3 Advent Calendar 2019</h1><img src=https://tech.yyh-gl.dev/img/2019/12/react_typescript_sample/qiita_advent_calendar_2019.png width=700><p>æœ¬è¨˜äº‹ã¯ <a href=https://qiita.com/advent-calendar/2019/go3 target=_blank rel="noopener noreferrer">Go3 Advent Calendar 2019</a>
ã® 8æ—¥ç›® ã®è¨˜äº‹ã§ã™ã€‚</p><p>ã§ã¯ã§ã¯ã€æ—©é€Ÿæœ¬é¡Œã«å…¥ã£ã¦ã„ãã¾ã™ã€‚</p><h1 id=ãƒ¢ãƒƒã‚¯ä½¿ã£ã¦ã¾ã™ã‹>ãƒ¢ãƒƒã‚¯ä½¿ã£ã¦ã¾ã™ã‹ï¼Ÿ</h1><p>ã¿ãªã•ã‚“ãƒ¢ãƒƒã‚¯ã‚³ãƒ¼ãƒ‰ã¯æ›¸ã„ã¦ã„ã¾ã™ã‹ï¼Ÿ</p><p>ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ã„ã‚‹ãªã‚‰ã€ã»ã¼å¿…ãšç™»å ´ã™ã‚‹ã‚ã®ãƒ¢ãƒƒã‚¯ã§ã™ã€‚<br>DBå‡¦ç†ã‚„é–¢æ•°ã®ãƒ¢ãƒƒã‚¯ãªã©ã„ã‚ã„ã‚ã‚ã‚Šã¾ã™ã‚ˆã­ã€‚</p><p>ãã‚“ãªãƒ¢ãƒƒã‚¯ã‚³ãƒ¼ãƒ‰ã§ã™ãŒã€ä½œã£ãŸã‚Šç®¡ç†ã™ã‚‹ã®ã‚ã‚“ã©ãã•ã„ãªãã¨ã‹æ€ã£ã¦ãªã„ã§ã™ã‹ï¼Ÿ<br>ãƒ¢ãƒƒã‚¯ã ã‹ã‚‰ã¨ã„ã£ã¦é›‘ãªã‚³ãƒ¼ãƒ‰ã«ãªã£ã¦ã„ã¾ã›ã‚“ã‹ï¼Ÿ</p><br><p>ä»Šå›ã¯ã€å¤–éƒ¨APIé€šä¿¡ã®ãƒ¢ãƒƒã‚¯åŒ–ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã—ã€<br>ãƒ¢ãƒƒã‚¯ã‚³ãƒ¼ãƒ‰ã®ä½œæˆãƒ»ç®¡ç†ã‚³ã‚¹ãƒˆã‚’è»½æ¸›ã™ã‚‹<br><u>VCR ãƒ©ã‚¤ãƒ–ãƒ©ãƒª</u> ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚</p><h1 id=vcr-ãƒ©ã‚¤ãƒ–ãƒ©ãƒª-ã¨ã¯>VCR ãƒ©ã‚¤ãƒ–ãƒ©ãƒª ã¨ã¯ï¼Ÿ</h1><p>VCRï¼ˆVideo Cassette Recorderï¼‰ã¨ã¯ã€<u>é€šä¿¡ã‚’ä¿å­˜ã—ã€å†ç”Ÿã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒª</u>ã§ã™ã€‚<br></p><p>ã¤ã¾ã‚Šã€APIãƒªã‚¯ã‚¨ã‚¹ãƒˆã®åˆå›é€šä¿¡ã®å†…å®¹ã‚’ä¿å­˜ã—ã€<br>æ¬¡å›ä»¥é™ãã®ä¿å­˜å†…å®¹ï¼ˆãƒ¬ã‚¹ãƒãƒ³ã‚¹ï¼‰ã‚’ä½¿ã„ã¾ã‚ã—ã¦ãã‚Œã‚‹ã¨ã„ã†ã‚‚ã®ã§ã™ã€‚</p><p>è¨€ã„æ›ãˆã‚Œã°ã€å¤–éƒ¨APIã®ãƒ¢ãƒƒã‚¯ã‚’è‡ªå‹•ç”Ÿæˆã—ã¦ãã‚Œã‚‹ã¨ã„ã†ã“ã¨ã§ã™ã­ï¼</p><h2 id=vcr-ãƒ©ã‚¤ãƒ–ãƒ©ãƒª-in-go-world>VCR ãƒ©ã‚¤ãƒ–ãƒ©ãƒª in Go World</h2><p>Goç”¨ã®VCRãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯<a href="https://github.com/search?l=Go&q=vcr&type=Repositories" target=_blank rel="noopener noreferrer">ã„ã‚ã„ã‚ã‚ã‚Šã¾ã™</a>
ã€‚<br>ã‚¹ã‚¿ãƒ¼æ•°ãŒå¤šã„ã®ã¯ä»¥ä¸‹ã®ã‚‚ã®ã§ã™ã€‚</p><ul><li><a href=https://github.com/dnaeon/go-vcr target=_blank rel="noopener noreferrer">go-vcr</a></li><li><a href=https://github.com/ComboStrikeHQ/vcr-go target=_blank rel="noopener noreferrer">vcr-go</a></li><li><a href=https://github.com/seborama/govcr target=_blank rel="noopener noreferrer">govcr</a></li><li><a href=https://github.com/googleapis/google-cloud-go/tree/master/rpcreplay target=_blank rel="noopener noreferrer">rpcreplay</a></li></ul><p>go-vcr ãŠã‚ˆã³ vcr-goï¼Œgovcr ã®é–‹ç™ºã¯ç››ã‚“ã§ã¯ãªã„ã‚ˆã†ã§ã™ã€‚</p><p>rpcreplay ã¯ <a href=https://github.com/googleapis/google-cloud-go target=_blank rel="noopener noreferrer">google-cloud-go</a>
ã«åŒ…å«ã•ã‚Œã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã‚ã‚Šã€å®‰å¿ƒã—ã¦ä½¿ãˆãã†ã§ã™ã€‚<br>ãŸã ã—ã€gRPC ç”¨ãªã®ã§ã€ãã®ç‚¹ã¯æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚<br><a href=https://godoc.org/cloud.google.com/go/rpcreplay target=_blank rel="noopener noreferrer">GoDocã¯ã“ã¡ã‚‰</a>
ã§ã™ã€‚</p><br><p>ä»Šå›ã¯ REST API ã‚’ä½¿ã£ã¦èª¬æ˜ã—ã¦ã„ãã®ã§ã€go-vcr ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚<br></p><p>go-vcr ã¯ã€vcr-go ã¨ govcr ã‚ˆã‚Šã‚¹ã‚¿ãƒ¼æ•°ãŒå¤šã„ã§ã™ã€‚<br>Ruby è£½ã® <a href=https://github.com/vcr/vcr target=_blank rel="noopener noreferrer">vcr</a>
ã¨ã„ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒã‚‚ã¨ã«ãªã£ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚</p><h1 id=ã‚µãƒ³ãƒ—ãƒ«ã‚’è¦‹ã¦ã„ã>ã‚µãƒ³ãƒ—ãƒ«ã‚’è¦‹ã¦ã„ã</h1><p>ã§ã¯ã€ã‚³ãƒ¼ãƒ‰ã‚’äº¤ãˆã¦ç´¹ä»‹ã—ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚<br>ä»Šå›ã¯ä¸‹è¨˜ã®ã‚ˆã†ãªç°¡å˜ãªã‚µãƒ³ãƒ—ãƒ«ã‚’ç”¨æ„ã—ã¾ã—ãŸã€‚</p><p>ï¼ˆæœ€çµ‚çš„ãªã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã¯<a href=https://github.com/yyh-gl/go-vcr-sample target=_blank rel="noopener noreferrer">ã“ã¡ã‚‰</a>
ã«ã‚ã‚Šã¾ã™ã€‚ï¼‰</p><p>Qiitaã®ãƒ¦ãƒ¼ã‚¶æƒ…å ±å–å¾—APIã‚’å‘¼ã³å‡ºã—ã€<br>ãƒ¬ã‚¹ãƒãƒ³ã‚¹å†…å®¹ï¼ˆID ã¨ Location ã®ã¿ï¼‰ã‚’è¡¨ç¤ºã™ã‚‹ã ã‘ã®ç°¡å˜ãªãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ã™ã€‚</p><pre class=line-numbers><code class=language-go>// /main.go

package main

import (
	&quot;fmt&quot;

	&quot;github.com/yyh-gl/go-vcr-sample/qiita&quot;
)

func main() {
	user := qiita.FetchUser(&quot;yyh-gl&quot;)
	fmt.Println(&quot;============ RESULT ============&quot;)
	fmt.Printf(&quot;%+v\n&quot;, user)
	fmt.Println(&quot;============ RESULT ============&quot;)
}
</code></pre><pre class=line-numbers><code class=language-go>// /qiita/qiita.go

package qiita

import (
	&quot;encoding/json&quot;
	&quot;io/ioutil&quot;
	&quot;net/http&quot;
)

type User struct {
	ID       string
	Location string
}

func FetchUser(id string) (user *User) {
	req, _ := http.NewRequest(&quot;GET&quot;, &quot;https://qiita.com/api/v2/users/&quot;+id, nil)

	client := new(http.Client)
	resp, _ := client.Do(req)
	defer resp.Body.Close()

	body, _ := ioutil.ReadAll(resp.Body)
	_ = json.Unmarshal(body, &amp;user)
	return user
}
</code></pre><p>å®Ÿè¡Œã—ã¦ã¿ã‚‹ã¨ã€ã€ã€</p><pre class=line-numbers><code class=language-zsh>$ go run main.go
============ RESULT ============
&amp;{ID:yyh-gl Location:Tokyo, Japan}
============ RESULT ============
</code></pre><p>ã¡ã‚ƒã‚“ã¨ ID ã¨ Location ãŒè¡¨ç¤ºã§ãã¦ã„ã¾ã™ã­ã€‚</p><h1 id=ãƒ†ã‚¹ãƒˆã—ãŸã„>ãƒ†ã‚¹ãƒˆã—ãŸã„</h1><p>ä»Šå›ã®ã‚µãƒ³ãƒ—ãƒ«ã¯ç°¡å˜ãªã‚³ãƒ¼ãƒ‰ã§ã™ãŒãƒ†ã‚¹ãƒˆã‚’æ›¸ãã“ã¨ã«ã—ã¾ã™ã€‚</p><img src=https://tech.yyh-gl.dev/img/2019/12/golang-vcr/test-lion.jpeg width=600><p>ãƒ»<br>ãƒ»<br>ãƒ»<br></p><pre class=line-numbers><code class=language-go>// /qiita/qiita_test.go

package qiita_test

import (
	&quot;testing&quot;

	&quot;github.com/stretchr/testify/assert&quot;
	&quot;github.com/yyh-gl/go-vcr-sample/qiita&quot;
)

func Test_FetchUser(t *testing.T) {
	tests := []struct {
		testCase     string
		id           string
		wantLocation string
	}{
		{
			testCase:     &quot;Qiitaã‹ã‚‰yyh-glã®ãƒ¦ãƒ¼ã‚¶æƒ…å ±ã‚’å–å¾—ã§ãã¦ã„ã‚‹ã“ã¨&quot;,
			id:           &quot;yyh-gl&quot;,
			wantLocation: &quot;Tokyo, Japan&quot;,
		},
	}

	for _, tt := range tests {
		t.Run(tt.testCase, func(t *testing.T) {
			user := qiita.FetchUser(tt.id)
			assert.Equal(t, tt.wantLocation, user.Location)
		})
	}
}
</code></pre><p>æ›¸ãã¾ã—ãŸã€‚</p><pre class=line-numbers><code class=language-zsh>$ go test ./...
?   	github.com/yyh-gl/go-vcr-sample	[no test files]
ok  	github.com/yyh-gl/go-vcr-sample/qiita	0.313s
</code></pre><p>ã¡ã‚ƒã‚“ã¨ãƒ†ã‚¹ãƒˆãŒé€šã‚Šã¾ã™ã­ã€‚</p><p>ã—ã‹ã—ã€ã“ã®ã¾ã¾ã§ã¯ãƒ†ã‚¹ãƒˆã®ãŸã³ã«<br>Qiita API ã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒé£›ã‚“ã§ã—ã¾ã†ã®ã§è‰¯ããªã„ã§ã™ã­ã€‚</p><p>ã“ã“ã§ã€æœ¬æ—¥ã®ä¸»å½¹ go-vcr ã‚’å°å…¥ã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚</p><h1 id=go-vcr-ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—>go-vcr ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—</h1><p>VCR ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯é€šä¿¡å†…å®¹ã‚’ä¿å­˜ã—ã¾ã™ã€‚<br>ã¤ã¾ã‚Šã€é€šä¿¡ã‚’å‚å—ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><p>go-vcr ã§ã¯ã€http.Client ã® Transport ã‚’ go-vcr ã§ç”¨æ„ã•ã‚ŒãŸã‚‚ã®ã«å·®ã—æ›¿ãˆã‚‹ã“ã¨ã§ã€<br>é€šä¿¡ã®å‚å—ã‚’å¯èƒ½ã«ã—ã¾ã™ã€‚</p><p>ã—ãŸãŒã£ã¦ã€ã¾ãšã¯ç‹¬è‡ªã® http.Client ã‚’å·®ã—è¾¼ã‚ã‚‹ã‚ˆã†ã«ã€<br>ã‚µãƒ³ãƒ—ãƒ«ã®ã‚³ãƒ¼ãƒ‰ã‚’ä¿®æ­£ã—ã¦ã„ãã¾ã™ã€‚</p><h2 id=qiita-api-ç”¨ã®-http-ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ä½œã‚‹>Qiita API ç”¨ã® HTTP ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ä½œã‚‹</h2><p>ã¾ãšã€<code>qiita.go</code> ã« HTTP ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆç”Ÿæˆé–¢æ•°ã‚’ä½œã‚Šã¾ã™ã€‚</p><pre class=line-numbers><code class=language-go>// /qiita/qiita.go

package qiita

import (
	&quot;encoding/json&quot;
	&quot;io/ioutil&quot;
	&quot;net/http&quot;
)

// ã“ã“
type Client struct {
	*http.Client
}

// ã“ã“
func NewClient(c *http.Client) Client {
	return Client{c}
}

type User struct {
	ID       string
	Location string
}

// ã“ã“
func (c Client) FetchUser(id string) (user *User) {
	req, _ := http.NewRequest(&quot;GET&quot;, &quot;https://qiita.com/api/v2/users/&quot;+id, nil)

	resp, _ := c.Do(req) // ã“ã“
	defer resp.Body.Close()

	body, _ := ioutil.ReadAll(resp.Body)
	_ = json.Unmarshal(body, &amp;user)
	return user
}
</code></pre><br><p><code>main.go</code> ã¨ <code>qiita_test.go</code> ã‚‚ç›´ã—ã¾ã™ã€‚</p><pre class=line-numbers><code class=language-go>// /main.go

package main

import (
	&quot;fmt&quot;
	&quot;net/http&quot;

	&quot;github.com/yyh-gl/go-vcr-sample/qiita&quot;
)

func main() {
	// ã“ã“
	qiitaClient := qiita.NewClient(http.DefaultClient)
	user := qiitaClient.FetchUser(&quot;yyh-gl&quot;)
	fmt.Println(&quot;============ RESULT ============&quot;)
	fmt.Printf(&quot;%+v\n&quot;, user)
	fmt.Println(&quot;============ RESULT ============&quot;)
}
</code></pre><pre class=line-numbers><code class=language-go>// /qiita/qiita_test.go

package qiita_test

import (
	&quot;net/http&quot;
	&quot;testing&quot;

	&quot;github.com/stretchr/testify/assert&quot;
	&quot;github.com/yyh-gl/go-vcr-sample/qiita&quot;
)

func Test_FetchUser(t *testing.T) {
	tests := []struct {
		testCase     string
		id           string
		wantLocation string
	}{
		{
			testCase:     &quot;Qiitaã‹ã‚‰yyh-glã®ãƒ¦ãƒ¼ã‚¶æƒ…å ±ã‚’å–å¾—ã§ãã¦ã„ã‚‹ã“ã¨&quot;,
			id:           &quot;yyh-gl&quot;,
			wantLocation: &quot;Tokyo, Japan&quot;,
		},
	}

    // ã“ã“
	qiitaClient := qiita.NewClient(http.DefaultClient)

	for _, tt := range tests {
		t.Run(tt.testCase, func(t *testing.T) {
			user := qiitaClient.FetchUser(tt.id)
			assert.Equal(t, tt.wantLocation, user.Location)
		})
	}
}
</code></pre><p>ã“ã®çŠ¶æ…‹ã§ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ã€ã€</p><pre class=line-numbers><code class=language-zsh>$ go test ./...
?   	github.com/yyh-gl/go-vcr-sample	[no test files]
ok  	github.com/yyh-gl/go-vcr-sample/qiita	0.293s
</code></pre><p>ã¡ã‚ƒã‚“ã¨é€šã‚Šã¾ã™ã­ã€‚</p><p>ã•ã¦ã€ã“ã‚Œã§ <code>NewClient()</code> ã«æ¸¡ã™å¼•æ•°ï¼ˆhttp.Clientï¼‰ã—ã ã„ã§ã€<br>ä½¿ç”¨ã™ã‚‹ HTTP ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå¤‰æ›´ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚</p><h2 id=go-vcr-å°å…¥>go-vcr å°å…¥</h2><p>ã“ã“ã‹ã‚‰ go-vcr ã‚’å°å…¥ã—ã¦ã€å¤–éƒ¨APIã¨ã®é€šä¿¡ã‚’ä¿å­˜ãƒ»å†ç”Ÿã—ã¦ã„ãã®ã§ã™ãŒã€<br><u>ã‚ã¡ã‚ƒãã¡ã‚ƒç°¡å˜</u>ã§ã™ã€‚</p><p>ä»Šå›ã¯ãƒ†ã‚¹ãƒˆã«ãŠã„ã¦ã€å¤–éƒ¨APIã¨ã®é€šä¿¡éƒ¨åˆ†ã‚’ãƒ¢ãƒƒã‚¯åŒ–ã—ãŸã„ã®ã§ã€<br><code>qiita_test.go</code> ã‚’ç›´ã—ã¦ã„ãã¾ã™ã€‚</p><pre class=line-numbers><code class=language-go>// /qiita_test.go

package qiita_test

import (
	&quot;net/http&quot;
	&quot;testing&quot;

	&quot;github.com/dnaeon/go-vcr/recorder&quot;
	&quot;github.com/stretchr/testify/assert&quot;
	&quot;github.com/yyh-gl/go-vcr-sample/qiita&quot;
)

func Test_FetchUser(t *testing.T) {
	tests := []struct {
		testCase     string
		id           string
		wantLocation string
	}{
		{
			testCase:     &quot;Qiitaã‹ã‚‰yyh-glã®ãƒ¦ãƒ¼ã‚¶æƒ…å ±ã‚’å–å¾—ã§ãã¦ã„ã‚‹ã“ã¨&quot;,
			id:           &quot;yyh-gl&quot;,
			wantLocation: &quot;Tokyo, Japan&quot;,
		},
	}

    // ã“ã“
	// go-vcr ã®ãƒ¬ã‚³ãƒ¼ãƒ€ã‚’ç”Ÿæˆ
	// é€šä¿¡å†…å®¹ã¯ ../fixtures/qiita ã«ä¿å­˜ã•ã‚Œã‚‹
	r, _ := recorder.New(&quot;../fixtures/qiita&quot;)
	defer r.Stop()

	customHTTPClient := &amp;http.Client{
		Transport: r, // ã“ã“ é‡è¦ï¼
	}
	qiitaClient := qiita.NewClient(customHTTPClient)

	for _, tt := range tests {
		t.Run(tt.testCase, func(t *testing.T) {
			user := qiitaClient.FetchUser(tt.id)
			assert.Equal(t, tt.wantLocation, user.Location)
		})
	}
}
</code></pre><p>ä»¥ä¸Šã§çµ‚äº†ã§ã™ã€‚</p><p>ã“ã®çŠ¶æ…‹ã§ <code>$ go test ./...</code> ã—ã¦ã¿ã‚‹ã¨ã€</p><pre class=line-numbers><code class=language-zsh>$ go test ./...
?   	github.com/yyh-gl/go-vcr-sample	[no test files]
ok  	github.com/yyh-gl/go-vcr-sample/qiita	0.472s
</code></pre><p>æ™®é€šã«ãƒ†ã‚¹ãƒˆãŒé€šã‚Šã¾ã™ã­ã€‚</p><p>ã§ã¯ã€ã“ã®çŠ¶æ…‹ã§ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ï¼ˆWiFiï¼‰ã‚’åˆ‡ã£ã¦ã€å†åº¦ãƒ†ã‚¹ãƒˆã—ã¦ã¿ã¾ã™ã€‚</p><pre class=line-numbers><code class=language-zsh>$ go test ./...
?   	github.com/yyh-gl/go-vcr-sample	[no test files]
ok  	github.com/yyh-gl/go-vcr-sample/qiita	0.014s
</code></pre><p>æˆåŠŸã—ã¾ã—ãŸã€‚<br>&ldquo;ä¿å­˜ã•ã‚ŒãŸé€šä¿¡å†…å®¹"ã‚’è¦‹ã¦ã„ã‚‹ã®ã§ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã«ç¹‹ãŒã£ã¦ã„ãªãã¦ã‚‚ã€ãƒ†ã‚¹ãƒˆãŒé€šã‚Šã¾ã™ã€‚<br>ï¼ˆ&ldquo;ä¿å­˜ã•ã‚ŒãŸé€šä¿¡å†…å®¹"ãŒã©ã“ã«ã‚ã‚‹ã‹ã¯å¾Œã§èª¬æ˜ã—ã¾ã™ï¼‰<br>ã¤ã¾ã‚Šã€<u>ãƒ¢ãƒƒã‚¯åŒ–ã§ãã¦ã—ã¾ã£ã¦ã„ã‚‹ã®ã§ã™ï¼</u></p><p>ã—ã‹ã‚‚ã€å®Ÿè¡Œæ™‚é–“ãŒçŸ­ããªã£ã¦ã„ã¾ã™ã­ï¼ã“ã‚Œã¯ã§ã‹ã„ã€‚</p><p>ã§ã¯ã€&ldquo;ä¿å­˜ã•ã‚ŒãŸé€šä¿¡å†…å®¹"ã‚’æ¶ˆã—ã¦ã€å†åº¦ãƒ†ã‚¹ãƒˆã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p><pre class=line-numbers><code class=language-zsh>$ go test ./...
?   	github.com/yyh-gl/go-vcr-sample	[no test files]
panic: runtime error: invalid memory address or nil pointer dereference [recovered]
	panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x40 pc=0x12aef8d]

goroutine 21 [running]:
testing.tRunner.func1(0xc0000fe200)
	/Users/yyh-gl/.anyenv/envs/goenv/versions/1.13.4/src/testing/testing.go:874 +0x3a3
panic(0x1343900, 0x1642f80)
	/Users/yyh-gl/.anyenv/envs/goenv/versions/1.13.4/src/runtime/panic.go:679 +0x1b2
github.com/yyh-gl/go-vcr-sample/qiita.Client.FetchUser(0xc00008b2c0, 0x13a96ac, 0x6, 0x104fe28)
	/Users/yyh-gl/workspaces/Go/src/github.com/yyh-gl/go-vcr-sample/qiita/qiita.go:26 +0x10d
github.com/yyh-gl/go-vcr-sample/qiita_test.Test_FetchUser.func1(0xc0000fe200)
	/Users/yyh-gl/workspaces/Go/src/github.com/yyh-gl/go-vcr-sample/qiita/qiita_test.go:37 +0x49
testing.tRunner(0xc0000fe200, 0xc0000a0540)
	/Users/yyh-gl/.anyenv/envs/goenv/versions/1.13.4/src/testing/testing.go:909 +0xc9
created by testing.(*T).Run
	/Users/yyh-gl/.anyenv/envs/goenv/versions/1.13.4/src/testing/testing.go:960 +0x350
FAIL	github.com/yyh-gl/go-vcr-sample/qiita	0.020s
FAIL
</code></pre><p>ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã—ãŸã­ã€‚<br>ã¡ã‚ƒã‚“ã¨ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã—ã¦ã„ãªã„ã®ã§ã€nilå‚ç…§ã®ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã„ã¾ã™ãŒã€<br>ã“ã‚Œã¯ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã«ç¹‹ãŒã£ã¦ã„ãªã„ï¼ˆï¼‹"ä¿å­˜ã•ã‚ŒãŸé€šä¿¡å†…å®¹"ãŒãªã„ï¼‰ãŸã‚ã«ã€<br>å¤–éƒ¨APIã¸ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒå¤±æ•—ã—ã€ç™ºç”Ÿã—ãŸã‚¨ãƒ©ãƒ¼ã§ã™ã€‚</p><h1 id=ä¿å­˜ã•ã‚ŒãŸé€šä¿¡å†…å®¹>&ldquo;ä¿å­˜ã•ã‚ŒãŸé€šä¿¡å†…å®¹&rdquo;</h1><p>ã§ã¯ã€ã•ãã»ã© go test ã‚’åˆã‚ã¦å®Ÿè¡Œã—ãŸã¨ãã«ä½•ãŒèµ·ã“ã£ã¦ã„ãŸã®ã‹ã‚’èª¬æ˜ã—ã¾ã™ã€‚</p><p>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã‚’è¦‹ã¦ã¿ã‚‹ã¨ã€</p><pre class=line-numbers><code class=language-zsh>$ tree go-vcr-sample
go-vcr-sample
â”œâ”€â”€ fixtures
â”‚Â Â  â””â”€â”€ qiita.yaml
â”œâ”€â”€ go.mod
â”œâ”€â”€ go.sum
â”œâ”€â”€ main.go
â””â”€â”€ qiita
    â”œâ”€â”€ qiita.go
    â””â”€â”€ qiita_test.go
</code></pre><p><code>fixtures</code> ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒã§ãã¦ã„ã¾ã™ã€‚</p><p>ä¸­èº«ã‚’è¦‹ã¦ã¿ã‚‹ã¨ã€</p><pre class=line-numbers><code class=language-zsh>$ ls fixtures
qiita.yaml
</code></pre><p><code>qiita.yaml</code> ãŒã§ãã¦ã„ã¾ã™ã€‚<br></p><pre class=line-numbers><code class=language-yaml># /fixtures/qiita.yaml

---
version: 1
interactions:
- request:
    body: &quot;&quot;
    form: {}
    headers: {}
    url: https://qiita.com/api/v2/users/yyh-gl
    method: GET
  response:
    body: &quot;{\&quot;description\&quot;:\&quot;æ±äº¬ã§ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã—ã¦ã¾ã™ï¼CLIååˆº $ npx yyh-glï¼ãƒ¡ã‚¤ãƒ³ã¯å€‹äººãƒ–ãƒ­ã‚°ã§ã™\U0001F4DD\&quot;,\&quot;facebook_id\&quot;:\&quot;\&quot;,\&quot;followees_count\&quot;:19,\&quot;followers_count\&quot;:18,\&quot;github_login_name\&quot;:\&quot;yyh-gl\&quot;,\&quot;id\&quot;:\&quot;yyh-gl\&quot;,\&quot;items_count\&quot;:11,\&quot;linkedin_id\&quot;:\&quot;\&quot;,\&quot;location\&quot;:\&quot;Tokyo,
      Japan\&quot;,\&quot;name\&quot;:\&quot;\&quot;,\&quot;organization\&quot;:\&quot;\&quot;,\&quot;permanent_id\&quot;:119088,\&quot;profile_image_url\&quot;:\&quot;https://qiita-image-store.s3.amazonaws.com/0/119088/profile-images/1535528464\&quot;,\&quot;team_only\&quot;:false,\&quot;twitter_screen_name\&quot;:null,\&quot;website_url\&quot;:\&quot;https://tech.yyh-gl.dev/\&quot;}&quot;
    headers:
      Cache-Control:
      - max-age=0, private, must-revalidate
      Content-Type:
      - application/json; charset=utf-8
      Date:
      - Sat, 07 Dec 2019 07:27:05 GMT
      Etag:
      - W/&quot;a6adaa36bf27d2045a25659539dcdae5&quot;
      Rate-Limit:
      - &quot;60&quot;
      Rate-Remaining:
      - &quot;56&quot;
      Rate-Reset:
      - &quot;1575706459&quot;
      Referrer-Policy:
      - strict-origin-when-cross-origin
      Server:
      - nginx
      Strict-Transport-Security:
      - max-age=2592000
      Vary:
      - Origin
      X-Content-Type-Options:
      - nosniff
      X-Download-Options:
      - noopen
      X-Frame-Options:
      - SAMEORIGIN
      X-Permitted-Cross-Domain-Policies:
      - none
      X-Request-Id:
      - f0ca74f0-4aae-4d0f-b6f9-ec08b0407b56
      X-Runtime:
      - &quot;0.082646&quot;
      X-Xss-Protection:
      - 1; mode=block
    status: 200 OK
    code: 200
    duration: &quot;&quot;
</code></pre><p>ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŠã‚ˆã³ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®å†…å®¹ãŒå…¨ã¦ä¿å­˜ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><br><p>ã“ã®ã‚ˆã†ã«ã€go-vcr ã§ã¯ã€é€šä¿¡å†…å®¹ã‚’å‚å—ã—ã¦ã€yaml å½¢å¼ã§ä¿å­˜ã—ã¾ã™ã€‚<br>ï¼ˆå†…å®¹è‡ªä½“ã‚‚ã€Web ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãªã‚‰ã‚ˆãè¦‹ã‹ã‘ã‚‹å˜èªã°ã‹ã‚Šãªã®ã§èª­ã¿ã‚„ã™ã„ã§ã™ã­ï¼‰</p><p>ãã—ã¦ã€ã“ã® yaml ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚‹ã¨ãã¯ã€å¤–éƒ¨APIã«å¯¾ã—ã¦ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é£›ã°ã•ãšã«ã€<br>yaml ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã‹ã‚‰ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã—ã¾ã™ã€‚</p><h1 id=ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ¸ˆã¿ã‹ã©ã†ã‹ã®åˆ¤æ–­æ–¹æ³•>ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ¸ˆã¿ã‹ã©ã†ã‹ã®åˆ¤æ–­æ–¹æ³•</h1><p>ã“ã“ã§ã€go-vcr ãŒã©ã®ã‚ˆã†ã«ã—ã¦ã€<br>ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ã£ãŸã“ã¨ãŒã‚ã‚‹ã‹ã©ã†ã‹ã‚’åˆ¤å®šã—ã¦ã„ã‚‹ã®ã‹èª¬æ˜ã—ã¦ã„ãã¾ã™ã€‚</p><p>ç­”ãˆã¯<a href=https://github.com/dnaeon/go-vcr/blob/9384691f0462689770c3e930cd8aff05c7075a5b/cassette/cassette.go#L103-L107 target=_blank rel="noopener noreferrer">ã“ã¡ã‚‰</a>
ã®ã‚³ãƒ¼ãƒ‰ã«ã‚ã‚Šã¾ã™ã€‚</p><pre class=line-numbers><code class=language-go>// DefaultMatcher is used when a custom matcher is not defined
// and compares only the method and URL.
func DefaultMatcher(r *http.Request, i Request) bool {
	return r.Method == i.Method &amp;&amp; r.URL.String() == i.URL
}
</code></pre><blockquote><p>compares only the method and URL.</p></blockquote><p>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã ã¨ã€HTTP ãƒ¡ã‚½ãƒƒãƒ‰ã¨ãƒªã‚¯ã‚¨ã‚¹ãƒˆURL ã—ã‹è¦‹ã¦ãªã„ã‚“ã§ã™ã­ã€‚</p><p>ã—ã‹ã—ã€ã“ã®åˆ¤å®šå‡¦ç†ã«ãŠã„ã¦ã€<br>HTTP ãƒ¡ã‚½ãƒƒãƒ‰ã¨ãƒªã‚¯ã‚¨ã‚¹ãƒˆURLä»¥å¤–ã‚‚è¦‹ã‚‹ã‚ˆã†ã«ã—ãŸã‹ã£ãŸã‚Šã€<br>é€†ã«ã“ã®URLã¸ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã ã‘ã¯ä¿å­˜ã—ãŸããªã„ã¨ã„ã£ãŸãƒ‹ãƒ¼ã‚ºã‚‚ã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚<br>ãã“ã§ ç™»å ´ã™ã‚‹ã®ãŒ <u>Custom Request Matching</u> ã§ã™ã€‚</p><h2 id=custom-request-matching>Custom Request Matching</h2><p><a href=https://github.com/dnaeon/go-vcr#custom-request-matching target=_blank rel="noopener noreferrer">README.md</a>
ã«ã‚‚ã‚ã‚‹ã¨ãŠã‚Šã€<br>Matcher ã‚’ä½œã£ã¦ã‚ã’ã‚‹ã ã‘ã§ã€ç°¡å˜ã«ã‚ªãƒªã‚¸ãƒŠãƒ«ã®åˆ¤å®šå‡¦ç†ã‚’å®Ÿè£…å¯èƒ½ã§ã™ã€‚</p><p>ã•ãã»ã©ã® README.md ã«ã‚ã‚‹ã‚µãƒ³ãƒ—ãƒ«ã‚’æ‹å€Ÿã—ã¦ã€<br>åƒ•ã®ã‚³ãƒ¼ãƒ‰æ›¸ãæ›ãˆã¦ã¿ã‚‹ã¨ä»¥ä¸‹ã®ã¨ãŠã‚Šã«ãªã‚Šã¾ã™ã€‚</p><pre class=line-numbers><code class=language-go>// /qiita/qiita_test.go

package qiita_test

import (
	&quot;bytes&quot;
	&quot;io/ioutil&quot;
	&quot;net/http&quot;
	&quot;testing&quot;

	&quot;github.com/dnaeon/go-vcr/cassette&quot;

	&quot;github.com/dnaeon/go-vcr/recorder&quot;
	&quot;github.com/stretchr/testify/assert&quot;
	&quot;github.com/yyh-gl/go-vcr-sample/qiita&quot;
)

func Test_FetchUser(t *testing.T) {
	tests := []struct {
		testCase     string
		id           string
		wantLocation string
	}{
		{
			testCase:     &quot;Qiitaã‹ã‚‰yyh-glã®ãƒ¦ãƒ¼ã‚¶æƒ…å ±ã‚’å–å¾—ã§ãã¦ã„ã‚‹ã“ã¨&quot;,
			id:           &quot;yyh-gl&quot;,
			wantLocation: &quot;Tokyo, Japan&quot;,
		},
	}

	// go-vcr ã®ãƒ¬ã‚³ãƒ¼ãƒ€ã‚’ç”Ÿæˆ
	// é€šä¿¡å†…å®¹ã¯ ../fixtures/qiita ã«ä¿å­˜ã•ã‚Œã‚‹
	r, _ := recorder.New(&quot;../fixtures/qiita&quot;)
	defer r.Stop()

    // ã“ã“
	r.SetMatcher(func(r *http.Request, i cassette.Request) bool {
		if r.Body == nil {
			return cassette.DefaultMatcher(r, i)
		}
		var b bytes.Buffer
		if _, err := b.ReadFrom(r.Body); err != nil {
			return false
		}
		r.Body = ioutil.NopCloser(&amp;b)
		return cassette.DefaultMatcher(r, i) &amp;&amp; (b.String() == &quot;&quot; || b.String() == i.Body)
	})

	customHTTPClient := &amp;http.Client{
		Transport: r,
	}
	qiitaClient := qiita.NewClient(customHTTPClient)

	for _, tt := range tests {
		t.Run(tt.testCase, func(t *testing.T) {
			user := qiitaClient.FetchUser(tt.id)
			assert.Equal(t, tt.wantLocation, user.Location)
		})
	}
}
</code></pre><p><code>SetMatcher()</code> å†…ã®å‡¦ç†ã«ã‚ˆã£ã¦ã€åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯ã‚’å¤‰æ›´ã—ã¾ã™ã€‚<br>ã“ã®ä¾‹ã ã¨ã€HTTP ãƒ¡ã‚½ãƒƒãƒ‰ã¨ãƒªã‚¯ã‚¨ã‚¹ãƒˆURL ã«åŠ ãˆã¦ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆBody ã®å†…å®¹ã‚‚è¦‹ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚</p><p>ã“ã®ã‚ˆã†ã«ã€<code>SetMatcher()</code> ã‚’å®šç¾©ã—ã¦ã‚„ã‚‹ã ã‘ã§ã™ã€‚<br>å¾Œã¯ã„ã¤ã‚‚ã©ãŠã‚Šã€http.Client ã® Transport ã«æ¸¡ã—ã¦ã‚„ã‚‹ã ã‘ãªã®ã§ç°¡å˜ã§ã™ã­ğŸ‘</p><h1 id=ä¿å­˜å†…å®¹ã‚’ä¿®æ­£ã™ã‚‹å¿…è¦ãŒå‡ºãŸã¨ãã¯ã©ã†ã™ã‚‹>ä¿å­˜å†…å®¹ã‚’ä¿®æ­£ã™ã‚‹å¿…è¦ãŒå‡ºãŸã¨ãã¯ã©ã†ã™ã‚‹ï¼Ÿ</h1><p>yaml ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¶ˆã™ã ã‘ã§ã™ã€‚</p><p>ä¾‹ãˆã°ã€å¤–éƒ¨APIã®ä»•æ§˜ãŒå¤‰ã‚ã‚Šã€ãƒ¢ãƒƒã‚¯ã‚’æ›´æ–°ã™ã‚‹å¿…è¦ãŒå‡ºã¦ããŸå ´åˆã¯ã€<br>yaml ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¶ˆã—ã¦ã‚„ã‚‹ã ã‘ã§ã€æ¬¡ã®APIãƒªã‚¯ã‚¨ã‚¹ãƒˆã®å†…å®¹ã‚’ä¿å­˜ => ã¤ã¾ã‚Šã€ãƒ¢ãƒƒã‚¯ã‚’æ›´æ–°ã§ãã¾ã™ã€‚</p><p>ã‚‚ã¡ã‚ã‚“ yaml ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç›´æ¥å¤‰æ›´ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚</p><p>ãƒ¢ãƒƒã‚¯ã®ç®¡ç†ãŒæ¥½ã«ãªã‚Šã¾ã™ã­ğŸ‘</p><h1 id=ã¾ã¨ã‚>ã¾ã¨ã‚</h1><p>go-vcr ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§ã€å¤–éƒ¨APIé€šä¿¡ã®ãƒ¢ãƒƒã‚¯åŒ–ãŠã‚ˆã³ç®¡ç†ãŒç°¡å˜ã«ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚<br>ã—ã‹ã‚‚ã€ãƒ¢ãƒƒã‚¯ã®å†…å®¹ã¯ã€å®Ÿéš›ã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã—ã¦å¾—ãŸå†…å®¹ãªã®ã§ã€<br>ä»•æ§˜ãŒæ¼ã‚Œã‚‹ã“ã¨ã‚‚ãªã„ã§ã—ã‚‡ã†ã€‚</p><p>ã¾ãŸã€ä»Šå›ã¯èª¬æ˜ã—ã¾ã›ã‚“ã§ã—ãŸãŒã€<br>go-vcr ã«ã¯ <a href=https://github.com/dnaeon/go-vcr#protecting-sensitive-data target=_blank rel="noopener noreferrer">Protecting Sensitive Data</a>
ã¨ã„ã†æ©Ÿèƒ½ã‚‚ã‚ã‚Šã€<br>æŒ‡å®šã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã—ãªã„ã‚ˆã†ã«ã™ã‚‹ã¨ã„ã£ãŸã“ã¨ã‚‚ã§ãã¾ã™ã€‚</p><p>ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºæ€§ãŒé«˜ãã€ã¨ã¦ã‚‚ãŠã™ã™ã‚ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚</p><p>ã‚‚ã—ãƒ¢ãƒƒã‚¯ã®ä½œæˆãƒ»ç®¡ç†ã§æ‚©ã‚“ã§ã„ã‚‹æ–¹ãŒãŠã‚‰ã‚ŒãŸã‚‰ã€<br>ãœã²ä¸€åº¦æ¤œè¨ã—ã¦ã¿ã¦ãã ã•ã„ï¼</p><br><p>Go3 Advent Calendar 2019ã€æ˜æ—¥ã¯ <a href=https://qiita.com/EbiEbiEvidence target=_blank rel="noopener noreferrer">EbiEbiEvidence</a>
ã•ã‚“ã§ã™ğŸ›«</p></div><footer><div class=stats><ul class=categories><li><a class=article-terms-link href=/categories/go/>Go</a></li><li><a class=article-terms-link href=/categories/%e3%83%86%e3%82%b9%e3%83%88/>ãƒ†ã‚¹ãƒˆ</a></li><li><a class=article-terms-link href=/categories/advent-calendar/>Advent Calendar</a></li></ul><div><good-counter rel-permalink=/blog/golang-vcr/></good-counter></div></div></footer><div class=fix><a href="https://github.com/yyh-gl/tech-blog/issues/new?template=fix_proposal.md&assignees=yyh-gl&title=ä¿®æ­£ææ¡ˆï¼šã€%e3%80%90Go%2bVCR%e3%80%91%e5%a4%96%e9%83%a8API%e3%81%a8%e3%81%ae%e9%80%9a%e4%bf%a1%e3%82%92%e4%bf%9d%e5%ad%98%e3%81%97%e3%81%a6%e3%83%86%e3%82%b9%e3%83%88%e3%81%ab%e4%bd%bf%e7%94%a8%e3%81%99%e3%82%8b%e8%a9%b1ã€" target=_blank rel="noopener noreferrer">ä¿®æ­£ææ¡ˆ</a></div></article><div class=pagination><a href=/blog/golangci-lint-custom-settings/ class="button left"><span>GolangCI-Lintã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç†è§£ã™ã‚‹</span></a>
<a href=/blog/react_typescript_sample/ class="button right"><span>ã€React+TypeScriptã€‘TypeScriptå…¥é–€</span></a></div></main><section id=site-sidebar><section id=recent-posts><header><h1>æœ€è¿‘ã®æŠ•ç¨¿</h1></header><article class=mini-post><a href=/blog/kotlin-ktor-stripe-tutorial/ class=image style="--bg-image:url('https://tech.yyh-gl.dev/img/2022/12/kotlin-ktor-stripe-tutorial/featured.webp')"><img src=https://tech.yyh-gl.dev/img/2022/12/kotlin-ktor-stripe-tutorial/featured.webp alt=featured></a><header><h2><a href=/blog/kotlin-ktor-stripe-tutorial/>Ktorã¨Stripeã§ECã‚µã‚¤ãƒˆã‚’ä½œã£ã¦ã¿ãŸ</a></h2><time class=published datetime="2022-12-21 00:00:00 +0900 +0900">2022-12-21</time></header></article><article class=mini-post><a href=/blog/docker-compose-override/ class=image style="--bg-image:url('https://tech.yyh-gl.dev/img/2022/03/docker-compose-override/featured.webp')"><img src=https://tech.yyh-gl.dev/img/2022/03/docker-compose-override/featured.webp alt=featured></a><header><h2><a href=/blog/docker-compose-override/>è¤‡æ•°ã®docker-compose.ymlã‚’ä½¿ã£ã¦ã€è¨­å®šã®è¿½åŠ ã‚„ä¸Šæ›¸ãã‚’ã‚„ã£ã¦ã¿ã‚‹</a></h2><time class=published datetime="2022-03-19 00:55:40 +0900 +0900">2022-03-19</time></header></article><article class=mini-post><a href=/blog/activity-2021/ class=image style="--bg-image:url('https://tech.yyh-gl.dev/img/2022/01/activity-2021/featured.webp')"><img src=https://tech.yyh-gl.dev/img/2022/01/activity-2021/featured.webp alt=featured></a><header><h2><a href=/blog/activity-2021/>ã€2021å¹´ã€‘ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ã¾ã¨ã‚</a></h2><time class=published datetime="2022-01-02 20:59:04 +0900 +0900">2022-01-02</time></header></article><footer><a href=/blog/ class=button>ç¶šãã‚’è¦‹ã‚‹</a></footer></section><section id=mini-bio><header><h1>About</h1></header><p>æ±äº¬ã§åƒãã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã§ã™ã€‚ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãŒãƒ¡ã‚¤ãƒ³ã§ã™ãŒã€ãƒ•ãƒ­ãƒ³ãƒˆã‚„ã‚¤ãƒ³ãƒ•ãƒ©ã‚‚ã•ã‚ã£ã¦ã„ã¾ã™ã€‚</p><footer><a href=/about class=button>ã‚‚ã£ã¨è©³ã—ãçŸ¥ã‚‹</a></footer></section></section><footer id=site-footer><ul class=socnet-icons><li><a href=//github.com/yyh-gl target=_blank rel=noopener title=GitHub class="fab fa-github"></a></li><li><a href=//www.linkedin.com/in/yyh-gl target=_blank rel=noopener title=LinkedIn class="fab fa-linkedin"></a></li><li><a href=//twitter.com/yyh_gl target=_blank rel=noopener title=Twitter class="fab fa-twitter"></a></li><li><a href=//speakerdeck.com/yyh_gl target=_blank title="Speaker Deck" class="fab fa-speaker-deck"></a></li><li><a href=//crowdin.com/profile/yyh-gl target=_blank title=Crowdin class="fas fa-pen-square"></a></li></ul><p class=copyright>Â© 2022 yyh-gl's Tech Blog<br>Theme: <a href=https://github.com/pacollins/hugo-future-imperfect-slim target=_blank rel=noopener>Hugo Future Imperfect Slim</a><br>A <a href=https://html5up.net/future-imperfect target=_blank rel=noopener>HTML5 UP port</a> | Powered by <a href=https://gohugo.io/ title=0.109.0 target=_blank rel=noopener>Hugo</a></p></footer><a id=back-to-top href=# class="fas fa-arrow-up fa-2x"></a>
<script src=/js/bundle.min.3ae2ce1efda88261d882e759310edb92f3f0a7186b06c5fd92aa30f8931ab94c.js integrity="sha256-OuLOHv2ogmHYgudZMQ7bkvPwpxhrBsX9kqow+JMauUw="></script>
<script src=/js/add-on.js></script>
<script src=/js/prism.js></script>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-140914324-1","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script></div></body></html>